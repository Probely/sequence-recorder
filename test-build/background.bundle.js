(()=>{"use strict";var e={p:"/"};e.p,e.p;!function(){let e=!1,t=[];function r(){chrome.storage.local.set({recordingEvents:t,startURLDimensionsUpdated:e,recordingTimestamp:Date.now()})}chrome.storage.local.get(["recordingEvents","startURLDimensionsUpdated","recordingTimestamp"],(r=>{const n=Date.now();r.recordingTimestamp&&n-r.recordingTimestamp>6e5?(chrome.storage.local.remove(["recordingEvents","startURLDimensionsUpdated","recordingTimestamp"]),t=[],e=!1):(r.recordingEvents&&Array.isArray(r.recordingEvents)&&(t=r.recordingEvents),void 0!==r.startURLDimensionsUpdated&&(e=r.startURLDimensionsUpdated))})),chrome.storage.sync.get(["isRecording"],(e=>{e.isRecording?(chrome.action||chrome.browserAction).setBadgeText({text:"ðŸ”´"},(()=>{})):(chrome.action||chrome.browserAction).setBadgeText({text:""},(()=>{}))})),chrome.runtime.onMessage.addListener(((n,s,o)=>{if("events"===n.messageType){if(!e&&(e=!0,1===t.length&&"goto"===n.event.type&&(t[0].windowWidth=n.event.windowWidth,t[0].windowHeight=n.event.windowHeight,t[0].url===n.event.url)))return void r();t.push(n.event),r()}else"start"===n.messageType?(e=!1,t=[n.event],r()):"clear"===n.messageType?(e=!1,t=[],chrome.storage.local.remove(["recordingEvents","startURLDimensionsUpdated","recordingTimestamp"])):"give_recording_data"===n.messageType&&chrome.runtime.sendMessage({messageType:"recording_data",recordingData:[].concat(t)})}))}()})();